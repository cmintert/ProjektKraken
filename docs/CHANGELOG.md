---
**Project:** ProjektKraken  
**Document:** Changelog  
**Last Updated:** 2026-01-01  
**Commit:** `373459f4`  
---

# Changelog

All notable changes to this project will be documented in this file.

## [Development] - 2025-12-22
### Added
- Add Go to navigation buttons in Relations tab
- Add Google docstrings to all undocumented items (100% coverage)
- Add StyleHelper, ui_constants, and EmptyStateWidget with tests
- Add WAL mode and create repository pattern for database operations
- Add comprehensive GitHub Copilot instructions
- Add comprehensive Senior Architect Review Report
- Add comprehensive architectural review report
- Add comprehensive code quality assessment and improve documentation coverage
- Add comprehensive code review report and final improvements
- Add comprehensive code review summary document
- Add comprehensive implementation summary documentation
- Add comprehensive implementation summary for map system
- Add comprehensive integration tests for ID-based wiki linking
- Add comprehensive map system documentation with usage examples
- Add comprehensive security and database improvements
- Add comprehensive security and headless operation tests
- Add current time line feature - distinct from playhead, persisted in database
- Add demo guide and finalize robust wiki-style linking implementation
- Add dynamic Types and Tags filters to UnifiedListWidget
- Add final summary and complete code quality assessment
- Add implementation summary documentation
- Add interactive MapWidget with draggable markers and normalized coordinates
- Add live search bar to project explorer
- Add longform editor GUI with split view (outline + content)
- Add longform service, commands, and CLI implementation
- Add map and marker command classes with undo/redo support
- Add map and marker database schema and CRUD operations
- Add map marker navigation: click markers to open items in editor
- Add problem statement compliance verification report - All requirements met
- Add refactoring status report - documentation consolidated and UI refactoring started
- Add refactoring summary and improve .gitignore
- Add structured lore date input with Year/Month/Day/Hour/Minute fields
- Add theme-aware scrollbar and splitter styling
- Add unit tests, integration tests, and documentation for longform feature
- Added a database population script
- Added theme selection in a new Settings Menue .
- Address code review feedback
- Address code review feedback: improve type hints, UUID validation, and error handling
- Feat: Add DockWidget close/float button icons with hover styling
- Feat: Aeon-style Ruler and Diamond Event Indicators
- Feat: Implement Attribute Editor for Entities and Events
- Feat: Initial Timeline Implementation with Zoom and Styling
- Feat: Phase 3 Navigation (Fit View) and Refactor (Logging, Constants)
- Feat: Timeline Navigation (List Click Syncs Focus)
- Feature: Relation Edit/Remove Buttons and Logic
- Feature: Relationship Editing and Sphinx Documentation
- feat(entity): enable relations in editor and add comprehensive tests
- feat(longform): add persistence, wikilinks, and robustness fixes
- feat(longform): improve heading rendering with markdown library
- feat(map): Add customizable SVG marker icons - Download 10 Tabler map icons to assets/icons/markers/ - Refactor MarkerItem to render SVG via QSvgRenderer - Add IconPickerDialog for icon selection via context menu - Add UpdateMarkerIconCommand for icon persistence - Store icon choice in Marker.attributes['icon'] - Update tests for new MarkerItem implementation
- feat(map): implement CRUD controls and fix display issues
- feat(map): store images in project folder with relative paths
- feat(timeline): implement drag-to-reschedule events and fix lane packing behavior
- feat(timeline): make only diamond markers clickable, add hover cursor, increase size
- feat(ui): centralized font config and visual separators
- feat(ux): improve creation flow and theme dialogs
- feat(ux): unified relation editor with autocompletion
- feat(wiki): Implement WikiLink autocompletion with theme support
- feat: Add Aeon Timeline-style semantic zoom ruler
- feat: Add Discard button to Event and Entity editors
- feat: Add PyInstaller packaging for desktop application
- feat: Add WebP image format support with new constants, tests, and a diagnostic script.
- feat: Add agent coding principles for code quality and commit workflow.
- feat: Add custom calendar system with bidirectional float-date conversion
- feat: Add live timeline preview and unified event inspector layout
- feat: Add map marker icon color customization
- feat: Add polished CompactDateWidget and CompactDurationWidget
- feat: Add variable height lane packing for timeline events
- feat: Drag-drop from Longform Outline to Map
- feat: Drag-drop items from Project Explorer to Map
- feat: Implement backend support for Entities (commands + db)
- feat: Implement command pattern for entity and event management with new base command and worker service, and remove temporary report files.
- feat: Implement event and entity editors with wiki text support, relations management, and new backend services.
- feat: Implement event duration support
- feat: Implement interactive map widget with draggable markers and normalized coordinates.
- feat: Implement wiki-linking text editor and entity editor, along with supporting services and tests.
- feat: Integrate Entity management into UI (List/Editor/Docking)
- feat: Integrate Longform Editor and auto-population
- feat: Introduce longform editor with dedicated widget, builder service, and associated commands.
- feat: Lazy wikilink creation with broken link visualization
- feat: Unify Events and Entities into Project Explorer
- feat: add semantic zoom timeline ruler with LOD transitions, opacity interpolation, and calendar-aware divisions
- feat: add timeline widget for visualizing events with interactive navigation and playhead.
- feat: implement granular event duration with dual-mode editor support
- feat: implement tags for entities and events

### Fixed
- Fix Gallery refresh: Auto-update on Add/Remove/Update commands
- Fix Gallery: Ensure double-click opens correct image
- Fix TimelineView lifecycle issue and QMouseEvent.pos() deprecation warning
- Fix WikiLink UI refresh and enable Event mentions
- Fix all critical test failures and improve robustness
- Fix dock resizing: configure corners and override minimumSizeHint
- Fix docstrings, PEP8 violations, and most test failures
- Fix double arrow icons on Types and Tags buttons
- Fix duplicate constant definitions and improve docstring in timeline.py
- Fix editor content switching on refresh
- Fix flake8 violations: remove unused imports, fix line lengths, remove code duplication
- Fix font sizes not applied to longform document and change Tab hotkeys
- Fix inconsistencies in architectural review report
- Fix linting and formatting issues
- Fix linting issues - apply black formatting and remove unused variable
- Fix linting issues in StyleHelper and refactored widgets
- Fix linting issues in map widget (flake8 clean)
- Fix linting: Resolve F841 unused variable in test script
- Fix longform selection and marker icon/color change errors
- Fix marker selection frame and event/entity editor dirty flag on init
- Fix regression issues - import errors and indentation
- Fix scrollbar corner widget and splitter theming
- Fix security, documentation, and code style issues
- Fix singular/plural grammar and final cleanup
- Fix startup crash, threading issues, and implement UnifiedListWidget
- Fix tests and linting: Resolved unsaved changes crashes & attachment schema
- Fix theme font sizes not applying to longform document
- Fix timeline zoom: use AnchorUnderMouse for robust zoom-to-cursor
- Fix unit tests for correct Async Mocking
- Fix unused imports from QPushButton removal
- Fix vertical squashing of widgets in event editor details tab
- Fix: Add missing styles for QTabWidget pane and QHeaderView to main.qss
- Fix: Enable QSS background styling for Custom Widgets (Dark Mode fix)
- Fix: Escape CSS braces in QSS template for Python formatting
- Fix: Ruler crowding (adaptive tick zoom) and Linting (bare except)
- Fix: ThemeManager.__new__ argument handling bug
- Fix: Timeline Panning (Robust mousePressEvent)
- Fix: Use calendar abbreviations for timeline ruler day/week labels
- Fix: add missing imports to icon_picker_dialog
- Fix: correct icon path in icon_picker_dialog
- Fix: resolve remaining 19 test failures and update unit tests for refactored MainWindow structure
- Fix: resolve startup errors and import issues
- Fix: update map navigation tests for refactored structure
- Fixed initial timeline view
- Fixed visibility of links in editor
- fix(map): resolve marker vanishing on drag and improve interaction
- fix(theme): persist theme selection across restarts
- fix(ui): Fix dark theme styling for tabs and dropdowns, and reset layout
- fix: Correct screen_x calculation for ruler labels
- fix: Update test_granular_duration to use CompactDurationWidget API
- fix: Update tests for new widget API and mock compatibility
- fix: prevent dock widget collapse during resize/rearrangement
- fix: update tests for pack_events tuple return and new LANE_HEIGHT
- fix: update tests to mock RelationEditDialog and fix timeline rect assertion

### Changed
- Refactor MainWindow to reduce complexity and improve testability
- Refactor Timeline and Map widgets - separate classes into modules
- Refactor timeline view: align top and lock vertical zoom
- Refactor timeline: Extract lane packing into separate class
- Refactor timeline: vertical infinite lines, gravity lane packing, collision avoidance
- Refactor widgets to use StyleHelper for theme-aware styling
- Refactor: Convert Timeline to Dockable Widget and update UI styling
- Refactor: Implement code review fixes (global fixture, linting)
- Refactor: Phase 1 Dumb UI - Decouple Update Commands and Editors
- Refactor: Phase 2 Dumb UI - Centralized Default Creation in Commands
- Refactor: Phase 3 Dumb UI - Validation Protocol & CommandResult
- refactor: consolidate CLI modules and expand command-line coverage

### Documentation
- Docs & Tests: Updated Sphinx documentation and refined Relation tests
- Docs: Improve docstring coverage for main, services, and timeline
- Docs: Update README, Design, and Sphinx docs. Test: Add comprehensive unit tests.
- Docs: Update Sphinx documentation via apidoc and build
- Docs: Update UI/UX Specifications and cleanup
- Docs: Update coding rules with tooling requirements
- docs: Add GitHub Action for automated Sphinx documentation deployment
- docs: Rename section title "The Time Engine" to "Time" in Design.md.
- docs: implement AGPLv3 licensing
- docs: update README, Design.md and requirements for v0.4.0

### Internal
- Apply StyleHelper spacing and standardize buttons across inspectors
- Bump version to 0.4.0 (Alpha)
- Chore: Add Quality Tools (flake8, black, mypy) and fix linting errors
- Complete DatabaseService refactoring - delegate all CRUD to repositories
- Complete God Object Refactoring: DatabaseService, Timeline, Map, and MainWindow
- Configure MainWindow corners for better dock resizing
- Configure gitignore to exclude asset directories
- Consolidate documentation and extract MainWindow components
- Enhance Gallery: Drag-drop support and fix caption editing bug
- Enhance ImageViewer: Smart resize to fit content exactly
- Enhance timeline: draggable playhead, status bar time display, and interaction fixes
- Extract data handling from MainWindow - create DataHandler module
- Hide current time line until explicitly set by user
- Ignore SQLite WAL temporary files
- Implement Async Database Operations and Fix Tests
- Implement CLI tools and abstract ThemeManager
- Implement ID-based wiki linking with backward compatibility
- Implement Phase 1: zoom-to-cursor, smart lane packing, and EventItem reuse
- Implement Phase 2: Scrubber/playhead with play/pause/step controls
- Implement Phase 3: Comprehensive test suite for all new features
- Implement document outline navigation
- Implement dynamic lane repacking on zoom
- Implement full text search in Project Explorer
- Implement missing CLI coverage for Maps, Wiki, and Longform
- Implement unsaved changes warning for Entity and Event inspectors
- Implement vertical drag-and-drop inspector tabs using SplitterTabInspector
- Increase timeline ruler padding to 30px
- Initial analysis of font size issue in longform document
- Initial commit: Core architecture, Database service, Event Editor, and Docstrings coverage
- Initial plan
- Integrate ID-based linking into editors and add broken link visualization
- Merge branch 'copilot/improve-mapwidget-interactivity' - Map CRUD controls and image storage
- Merge branch 'copilot/refactor-god-objects' of https://github.com/cmintert/ProjektKraken into copilot/refactor-god-objects
- Merge branch 'timeline_enhancement' - Live preview and unified inspector
- Merge copilot/code-review-sqlite-repository-another-one into main
- Merge pull request #1 from cmintert/copilot/assess-code-quality
- Merge pull request #10 from cmintert/copilot/implement-longform-live-document
- Merge pull request #12 from cmintert/copilot/code-review-sqlite-repo
- Merge pull request #13 from cmintert/copilot/fix-font-sizes-application
- Merge pull request #2 from cmintert/copilot/add-google-docstrings
- Merge pull request #21 from cmintert/copilot/review-codebase-for-clean-code
- Merge pull request #27 from cmintert/copilot/add-style-helper-utility
- Merge pull request #4 from cmintert/copilot/setup-copilot-instructions
- Merge pull request #5 from cmintert/copilot/replace-wiki-link-processing
- Merge pull request #8 from cmintert/copilot/code-review-sqlite-repository
- Polish code based on final review feedback
- Remove duplicate StyleHelper imports
- Remove unused import, finalize code review improvements
- Removed a small error correctly use  QTextCursor.MoveMode.KeepAnchor now.
- Replace WikiLink parser and commands with new implementation
- Style: Run black and fix flake8 errors in theme_manager
- Test: Added Unit Tests for Relations and Commands
- Test: Improve coverage for event_commands and event_list
- Test: Major coverage improvements for timeline and main window
- Tests & Docs: Added Timeline unit tests and updated Sphinx docs
- UI: Move dock widget tabs to the top (North) position
- Unify inspector UI style and resolve lint warnings
- Unify inspector button layouts and remove redundant labels
- Update CLI README with Map, Wiki, and Longform documentation
- Update README with code quality metrics and documentation links
- Update Sphinx docs: Furo theme, all modules documented, reorganize markdown files
- Update UI/UX specifications with StyleHelper usage requirements
- Update longform documentation with GUI keyboard shortcuts
- Update refactoring status - all 3 god objects complete
- Use Optional instead of | None for consistency
- Widen playhead hitbox width to 20px
- chore: add coverage data file
- chore: cleanup old docs and ignore test results
- chore: delete generated test output file
- chore: minor updates to data_handler and main
- test: Add unit tests for dock widget layout, covering timeline dockability and general floating/movable features.


*This changelog was automatically generated.*