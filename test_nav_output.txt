============================= test session starts =============================
platform win32 -- Python 3.13.9, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\chris\Antigravity Projects\ProjektKraken\.venv\Scripts\python.exe
cachedir: .pytest_cache
PySide6 6.10.1 -- Qt runtime 6.10.1 -- Qt compiled 6.10.1
rootdir: C:\Users\chris\Antigravity Projects\ProjektKraken
configfile: pytest.ini
plugins: cov-7.0.0, qt-4.5.0
collecting ... collected 3 items

tests/integration/test_wikilinking_navigation.py::test_navigate_to_entity_success PASSED [ 33%]
tests/integration/test_wikilinking_navigation.py::test_navigate_to_entity_case_insensitive PASSED [ 66%]
tests/integration/test_wikilinking_navigation.py::test_navigate_to_entity_not_found FAILED [100%]

================================== FAILURES ===================================
______________________ test_navigate_to_entity_not_found ______________________

qtbot = <pytestqt.qtbot.QtBot object at 0x000002125BACF110>
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x000002125B572650>

    def test_navigate_to_entity_not_found(qtbot, monkeypatch):
        """Test behavior when entity is not found."""
        window = MainWindow()
        window.worker = MagicMock()
        window._cached_entities = []
        window.load_entity_details = MagicMock()
    
        # Mock MessageBox to prevent blocking
        mock_msg = MagicMock()
        monkeypatch.setattr("PySide6.QtWidgets.QMessageBox.information", mock_msg)
    
        window.navigate_to_entity("Unknown")
    
        window.load_entity_details.assert_not_called()
        mock_msg.assert_called_once()
>       assert "not found" in mock_msg.call_args[0][2]
E       assert 'not found' in "No entity or event named 'Unknown' found."

tests\integration\test_wikilinking_navigation.py:61: AssertionError
---------------------------- Captured stderr call -----------------------------
2025-12-11 20:56:52 - src.app.main - INFO - Navigating to target: Unknown
------------------------------ Captured log call ------------------------------
INFO     src.app.main:main.py:624 Navigating to target: Unknown
=========================== short test summary info ===========================
FAILED tests/integration/test_wikilinking_navigation.py::test_navigate_to_entity_not_found
========================= 1 failed, 2 passed in 0.17s =========================
